{%extends "additionalContent_base.ncl.j2" %}
{% block mainVideo %}       
    	<media id="mVideo" src="{{'media/' .. files_list.video}}" descriptor="desVideo">
			<property name="bounds"/>
    	</media>

{% endblock %}
{#endblock mainVideo #}
{% block interactiveButtons %}
		<media id="mBegin" descriptor="desBegin" src="{{'media/' .. files_list.begin}}"/>
		<media id="mExit" descriptor="desExit" src="{{'media/' .. files_list.close}}"/>
		
		<media id="mReg" descriptor="desReg" src="{{'media/' .. files_list.reg}}"/>

	{% for i in files_list.buttons %}
		<media id="{{'m' .. i.name}}" src ="{{'media/' .. i.image}}" descriptor="{{'desButton' .. loop.index}}"/>
    	<media id="{{'m' .. i.name .. '1'}}" src ="{{'media/' .. i.image}}" descriptor="{{'desButton' .. loop.index .. '_1'}}"/>
		<media id="{{'m' .. i.name .. 'Right'}}" src="{{'media/' .. i.right}}" descriptor="{{'desButton' .. loop.index ..'Right'}}"/> 
		<media id="{{'m' .. i.name .. 'Left'}}" src="{{'media/' .. i.left}}" descriptor="{{'desButton' .. loop.index ..'Right'}}"/> 
		<media id="{{'m' .. i.name .. 'Bg'}}" src ="{{'media/' .. i.background}}" descriptor="{{'desButton' .. loop.index .. 'Bg'}}"/>
		<media id="{{'m' .. i.name .. 'Title'}}" src="{{'media/' .. i.title}}" descriptor="{{'desButton' .. loop.index .. 'Title'}}">
			<property name="width" value="20%"/>
			<property name="height" value="5%"/>
			<property name="left" value="74%"/>
			<property name="top" value="{{73.8 + 5.0*loop.index0}}%"/>
			<property name="fontColor" value="white"/>
			<property name="fontSize" value="17"/>
			<property name="zIndex" value="3"/>
			<property name="fontFamily" value="Tiresias"/>
		</media>
		<media id="{{'m' .. i.name .. 'Title1'}}" src="{{'media/' .. i.title}}" descriptor="{{'desButton' .. loop.index .. 'Title1'}}">
			<property name="width" value="20%"/>
			<property name="height" value="5%"/>
			<property name="left" value="74%"/>
			<property name="top" value="{{13.8 + 5.0*loop.index0}}%"/>
			<property name="fontColor" value="white"/>
			<property name="fontSize" value="17"/>
			<property name="zIndex" value="3"/> 
			<property name="fontFamily" value="Tiresias"/>
		</media>
		<media id="{{'m' .. i.name .. 'Info'}}" src="{{'media/'.. i.info}}" descriptor="{{'desButton'.. loop.index .. 'Info'}}">
		{% if loop.index == 4 %}
			<property name="width" value="23%"/>
			<property name="height" value="53%"/>
		{% endif%}
			<property name="left" value="70%"/>
			<property name="top" value="{{19 + 5.0*loop.index0}}%"/>
			<property name="fontColor" value="black"/>
			<property name="fontSize" value="17"/>
			<property name="zIndex" value="3"/> 
			<property name="fontFamily" value="Tiresias"/>
		</media>
		<media id="{{'m' .. i.name .. 'Info1'}}" src="{{'media/'.. i.infoPlus}}" descriptor="{{'desButton'.. loop.index .. 'Info1'}}">
		{% if loop.index == 4 %}
			<property name="width" value="23%"/>
			<property name="height" value="53%"/>
		{% endif%}
			<property name="left" value="70%"/>
			<property name="top" value="{{13.8 + 5.0*loop.index0}}%"/>
			<property name="fontColor" value="black"/>
			<property name="fontSize" value="17"/>
			<property name="zIndex" value="3"/> 
			<property name="fontFamily" value="Tiresias"/>
		</media> 

	{% endfor %} 
{% endblock %}     
{# endblock interactiveButtons #}
{% include "macros.j2" %}
{% block startApp %}
{%+ call nutshell("mBegin", "INFO", "onKeySelectionStartNStopN") -%}
	{% for i in files_list.buttons %}
			{% set values = {'m' .. i.name , 'm' .. i.name .. 'Title'} %} 
			{{- setAction('start', values) }}		
	{% endfor %}	
			<bind role="start" component="mExit"/>	
			<bind role="stop" component="mBegin"/>
{%+ endcall %}	
{# endcall nutshell #}
{%- endblock %}
{# endblock startApp #}
{% block endApp %}
{%+ call nutshell("mExit", "INFO", "onKeySelectionStartNStopN") -%}
			<bind role="start" component="mBegin"/>
	{% for i in files_list.buttons %}
			{% set values = {'m' .. i.name, 'm' .. i.name .. '1', 
			'm' .. i.name .. 'Title', 'm' .. i.name .. 'Title1', 'm' .. i.name .. 'Bg',
			'm' .. i.name .. 'Info'} %} 
			{{- setAction('stop', values) }}		
	{% endfor %}	
			<bind role="stop" component="mExit"/>	
			<bind role="stop" component="mReg"/>
{%+ endcall %}	
{# endcall nutshell #}  
{%- endblock %}
{# endblock endApp #}

{% block cursorDown %}
{%+ call nutshell("mReg", "CURSOR_DOWN", "onKeySelectionStartNStopN") -%}
			<bind role="stop" component="mReg"/>
	{% for i in files_list.buttons %}
			{% set values = {'m' .. i.name .. '1', 'm' .. i.name .. 'Title1', 
			'm' .. i.name .. 'Bg', 'm' .. i.name .. 'Info'} %} 
			{{- setAction('stop', values) }}					
	{% endfor %}	
	{% for i in files_list.buttons %}
			{% set values = {'m' .. i.name .. '1', 'm' .. i.name .. 'Title'} %} 
			{{- setAction('start', values) }}					
	{% endfor %}
{%+ endcall %}	
{# endcall nutshell #}
{%- endblock %}
{# endblock cursorDown #}

{% block startButtons %}
	{% set key = {'RED', 'GREEN', 'YELLOW', 'BLUE'} %}
	{% set button = {} %}
	{% for i in files_list.buttons %}
		{% set button = table.insert(button, i.name) %}
	{% endfor %}
	{% for i in files_list.buttons %}
		{%+ call nutshell("m".. i.name, key[loop.index], "onKeySelectionStartNStopN") %}
			{% if loop.index == 1 %}
			{% set values = {'m' .. button[1], 'm' .. button[1] .. 'Title'} %} 
			{{- setAction('stop', values) -}}					
			{% set values = {'m' .. button[1] .. '1', 'm' .. button[1] .. 'Title1', 
			'm' .. button[1] .. 'Bg', 'm' .. button[1] .. 'Info'} %} 
			{{- setAction('start', values) }}			
			<bind role="start" component="mReg"/>	
		{% elseif loop.index == 2 %}
			{% set values = {'m' .. button[1], 'm' .. button[1] .. 'Title', 'm' .. button[2], 
			'm' .. button[2] .. 'Title', 'm' .. button[2] .. 'Bg', 'm' .. button[2] .. 'Info'} %} 
			{{- setAction('stop', values) -}}					
			{% set values = {'m' .. button[1] .. '1', 'm' .. button[1] .. 'Title1', 
			'm' .. button[2] .. '1', 'm' .. button[2] .. 'Title1',
			'm' .. button[2] .. 'Bg', 'm' .. button[2] .. 'Info'} %} 
			{{- setAction('start', values) }}			
			<bind role="start" component="mReg"/>		
		{% elseif loop.index == 3 %}
			{% set values = {'m' .. button[1], 'm' .. button[1] .. 'Title',
			'm' .. button[2], 'm' .. button[2] .. 'Title', 'm' .. button[3], 
			'm' .. button[3] .. 'Title', 'm' .. button[1] .. 'Bg', 
			'm' .. button[1] .. 'Info', 'm' .. button[2] .. 'Bg', 
			'm' .. button[2] .. 'Info' } %} 
			{{- setAction('stop', values) -}}					
			{% set values = {'m' .. button[1] .. '1', 'm' .. button[1] .. 'Title1', 
			'm' .. button[2] .. '1', 'm' .. button[2] .. 'Title1',
			'm' .. button[3] .. '1', 'm' .. button[3] .. 'Title1',
			'm' .. button[3] .. 'Bg', 'm' .. button[3] .. 'Info'} %}	
			{{- setAction('start', values) }}				
			<bind role="start" component="mReg"/>
		{% elseif loop.index == 4 %}
			{% set values = {'m' .. button[1], 'm' .. button[1] .. 'Title',
			'm' .. button[2], 'm' .. button[2] .. 'Title', 'm' .. button[3], 
			'm' .. button[3] .. 'Title', 'm' .. button[4], 
			'm' .. button[4] .. 'Title', 'm' .. button[1] .. 'Bg', 
			'm' .. button[1] .. 'Info', 'm' .. button[2] .. 'Bg', 
			'm' .. button[2] .. 'Info', 'm' .. button[3] .. 'Bg', 
			'm' .. button[3] .. 'Info' } %} 
			{{- setAction('stop', values) -}}					
			{% set values = {'m' .. button[1] .. '1', 'm' .. button[1] .. 'Title1', 
			'm' .. button[2] .. '1', 'm' .. button[2] .. 'Title1',
			'm' .. button[3] .. '1', 'm' .. button[3] .. 'Title1',
			'm' .. button[4] .. '1', 'm' .. button[4] .. 'Title1',
			'm' .. button[4] .. 'Bg', 'm' .. button[4] .. 'Info'} %}	
			{{- setAction('start', values) }}				
			<bind role="start" component="mReg"/>
		{% endif %}
		{%+ endcall %}			
		{# endcall nutshell #}
	{% endfor %}
{%- endblock %}
{# endblock startButtons #}


{% block buttons %}
	{% set key = {'RED', 'GREEN', 'YELLOW', 'BLUE'} %}
	{% for i in	 files_list.buttons %}
	{% call nutshell("m".. i.name, colors[loop.index], "onKeySelectionStartNStopN") %}
			{%- set values = {'m' .. i.name, 'm' .. i.name .. 'Title'} %} 
			{{- setAction('stop', values) }}
			<bind role="start" component="mReg"/>
			{% set values = {'m' .. i.name .. '1', 'm' .. i.name .. 'Title1', 'm' .. i.name .. 'Bg', 'm' .. i.name .. 'Info'} %} 
			{{- setAction('start', values) }}				
	{% endcall %}
	{% endfor %} 
{%- endblock %}
{# endblock buttons #} 

